{"version":3,"sources":["../src/validate-required-parameters.js"],"names":["isRequired","routeParam","map","value","required","or","isMissing","event","params","in","x","name","validateRequiredParameters","route","parameters","some","status","message"],"mappings":"AAEA,a,sGAEA,8BACA,gCAEA,GAAMA,YAAa,QAAbA,WAAa,mBACjB,kBAAMC,UAAN,EAAkBC,GAAlB,CAAsB,sBAASC,OAAMC,QAAf,CAAtB,EAA+CC,EAA/C,CAAkD,IAAlD,CADiB,CAAnB,CAGA,GAAMC,WAAY,QAAZA,UAAY,CAACL,UAAD,CAAaM,KAAb,QAChB,kBAAMA,MAAMC,MAAN,CAAaP,WAAWQ,EAAxB,CAAN,EACGP,GADH,CACO,kBAAKQ,GAAET,WAAWU,IAAb,CAAL,CADP,EAEGT,GAFH,CAEO,kBAAK,MAAL,CAFP,EAGGG,EAHH,CAGM,IAHN,CADgB,CAAlB,CAMO,GAAMO,+DAA6B,QAA7BA,2BAA6B,CAACC,KAAD,CAAQN,KAAR,QACxC,kBAAMM,KAAN,EACGX,GADH,CACO,sBAASW,OAAMC,UAAf,CADP,EAEGZ,GAFH,CAEO,2BAAcY,YAAWC,IAAX,CAAgB,2BAAcd,YAAWU,IAAX,GAAoB,GAApB,EAA2BX,WAAWC,UAAX,CAA3B,EAAqDK,UAAUL,UAAV,CAAsBM,KAAtB,CAAnE,CAAhB,EAAmH,IAAnH,CAA0HM,KAAxI,CAFP,EAGGR,EAHH,CAGM,CAAEW,OAAQ,GAAV,CAAeC,QAAS,4BAAxB,CAHN,CADwC,CAAnC","file":"validate-required-parameters.js","sourcesContent":["/* jshint -W097, esversion: 6, strict: true, node: true */\r\n/* global module */\r\n'use strict';\r\n\r\nimport { Maybe } from 'liftjs';\r\nimport { Result } from './result';\r\n\r\nconst isRequired = routeParam =>\r\n  Maybe(routeParam).map(value => value.required).or(true);\r\n\r\nconst isMissing = (routeParam, event) => \r\n  Maybe(event.params[routeParam.in])\r\n    .map(x => x[routeParam.name])\r\n    .map(x => false)\r\n    .or(true);\r\n\r\nexport const validateRequiredParameters = (route, event) =>\r\n  Maybe(route)\r\n    .map(route => route.parameters)\r\n    .map(parameters => parameters.some(routeParam => routeParam.name !== '*' && isRequired(routeParam) && isMissing(routeParam, event)) ? null : route)\r\n    .or({ status: 400, message: 'missing required parameter' });"]}