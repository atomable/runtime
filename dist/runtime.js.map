{"version":3,"sources":["../src/runtime.js"],"names":["module","exports","main","call","context","callback","basePath","config","map","files","extractConfig","mergeConfigs","configs","get","then","res","catch"],"mappings":"aAAA,gCACA,yCACA,oDACA,gCAEAA,OAAOC,OAAP,CAAeC,IAAf,CAAsB,SAACC,IAAD,CAAOC,OAAP,CAAgBC,QAAhB,CAA6B,CACjD,GAAMC,UAAWF,QAAQE,QAAR,EAAoB,YAArC,CAEA,GAAMC,QAAS,mBAAO,qCAAgBD,QAAhB,CAAP,EACZE,GADY,CACR,sBAASC,OAAMD,GAAN,CAAUE,aAAV,CAAT,CADQ,EAEZF,GAFY,CAER,wBAAWG,cAAaC,OAAb,CAAX,CAFQ,EAGZJ,GAHY,CAGR,uBAAU,mBAAOD,MAAP,CAAe,2BAAWJ,IAAX,CAAf,CAAiCG,QAAjC,CAAV,CAHQ,EAIZO,GAJY,GAKZC,IALY,CAKP,oBAAOT,UAAS,IAAT,CAAeU,GAAf,CAAP,CALO,EAMZC,KANY,CAMN,oBAAOX,UAAS,IAAT,CAAeU,GAAf,CAAP,CANM,CAOhB,CAVD","file":"runtime.js","sourcesContent":["import { router } from './router';\r\nimport { buildEvent } from './build-event';\r\nimport { findConfigFiles } from './find-config-files';\r\nimport { Result } from './result';\r\n\r\nmodule.exports.main = (call, context, callback) => {\r\n  const basePath = context.basePath || './project/';\r\n  \r\n  const config = Result(findConfigFiles(basePath))\r\n    .map(files => files.map(extractConfig))\r\n    .map(configs => mergeConfigs(configs))\r\n    .map(config => router(config, buildEvent(call), basePath)) // basePath should not be passed anymore, it should come from the config.\r\n    .get()\r\n    .then(res => callback(null, res))\r\n    .catch(res => callback(null, res));\r\n};\r\n\r\n"]}