'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.router=undefined;var _liftjs=require('liftjs');var _result=require('./result');var _resolveModule=require('./resolve-module');var _resolveRoute=require('./resolve-route');var _validateRequiredParameters=require('./validate-required-parameters');var _buildModuleParameters=require('./build-module-parameters');var _handleExecutionResult=require('./handle-execution-result');function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step('next',value)},function(err){step('throw',err)})}}return step('next')})}}var router=exports.router=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(config,event,basePath){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt('return',(0,_result.Result)((0,_resolveRoute.resolveRoute)(config,event)).map(function(route){return(0,_validateRequiredParameters.validateRequiredParameters)(route,event)}).map(function(route){return(0,_buildModuleParameters.buildModuleParameters)(route,event)}).map(function(res){return(0,_resolveModule.resolveModule)(res.route,res.params,basePath)}).map(function(res){return function(){return res.module.apply(res,_toConsumableArray(res.params))}}).map(function(executor){return(0,_handleExecutionResult.handleExecutionResult)(executor)}).get());case 1:case'end':return _context.stop();}}},_callee,this)}));return function router(_x,_x2,_x3){return _ref.apply(this,arguments)}}();
//# sourceMappingURL=router.js.map