{"version":3,"sources":["../src/resolve-route.js"],"names":["routeMatchesEvent","route","event","path","toLowerCase","method","resolveRoute","configs","config","filter","https","map","or","length","status","message","matchedConfig","matchedRoute","Object","assign","handler","basePath"],"mappings":"qGAAA,8BACA,gCAEA,GAAMA,mBAAoB,QAApBA,kBAAoB,CAACC,KAAD,CAAQC,KAAR,QACxBD,OAAME,IAAN,CAAWC,WAAX,KAA6BF,MAAMC,IAAN,CAAWC,WAAX,EAA7B,EACEH,MAAMI,MAAN,CAAaD,WAAb,KAA+BF,MAAMG,MAAN,CAAaD,WAAb,EAFT,CAA1B,CAIO,GAAME,mCAAe,QAAfA,aAAe,CAACC,OAAD,CAAUL,KAAV,CAAoB,CAC9C,GAAMM,QAASD,QAAQE,MAAR,CAAe,gBAAU,CACtC,MAAO,kBAAMD,OAAOE,KAAb,EACJC,GADI,CACA,sBAASX,mBAAkBC,KAAlB,CAAyBC,KAAzB,CAAT,CADA,EAEJU,EAFI,CAED,KAFC,CAGR,CAJc,CAAf,CAMA,GAAIJ,OAAOK,MAAP,GAAkB,CAAtB,CAAyB,CACvB,MAAO,CAAEC,OAAQ,GAAV,CAAeC,QAAS,WAAxB,CACR,CAFD,IAEO,IAAIP,OAAOK,MAAP,CAAgB,CAApB,CAAuB,CAC5B,MAAO,CAAEC,OAAQ,GAAV,CAAeC,QAAS,yBAAxB,CACR,CAED,GAAMC,eAAgBR,OAAO,CAAP,CAAtB,CACA,GAAMS,cAAeD,cAAcN,KAAnC,CAEA,MAAOQ,QAAOC,MAAP,CAAc,CAAEC,QAASJ,cAAcI,OAAzB,CAAkCC,SAAUL,cAAcK,QAA1D,CAAd,CAAqFJ,YAArF,CACR,CAjBM","file":"resolve-route.js","sourcesContent":["import { Maybe } from 'liftjs';\r\nimport { Result } from './result';\r\n\r\nconst routeMatchesEvent = (route, event) =>\r\n  route.path.toLowerCase() === event.path.toLowerCase() &&\r\n    route.method.toLowerCase() === event.method.toLowerCase();\r\n\r\nexport const resolveRoute = (configs, event) => {\r\n  const config = configs.filter(config => {\r\n    return Maybe(config.https)\r\n      .map(route => routeMatchesEvent(route, event))\r\n      .or(false);\r\n  });\r\n\r\n  if (config.length === 0) {\r\n    return { status: 404, message: 'not found' };\r\n  } else if (config.length > 1) {\r\n    return { status: 500, message: 'multiple routes matched' };\r\n  }\r\n\r\n  const matchedConfig = config[0];\r\n  const matchedRoute = matchedConfig.https;\r\n\r\n  return Object.assign({ handler: matchedConfig.handler, basePath: matchedConfig.basePath, }, matchedRoute);\r\n};"]}